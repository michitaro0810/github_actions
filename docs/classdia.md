# クラス図

## 改版履歴

|発行日|版数|改版内容|担当|
|:---|:---:|:---|:---|
2020/11/13|1|初版の作成|渡邊|
2020/11/19|2|usersクラスをstudentsクラスとteachersクラスに分けるため追加<br>class_relationsクラスは多対多では無くなったので削除|渡邊|
2020/11/27|3|クラス図の写真が2個で見にくかったので、1個にする<br>studentsクラスではなく、usersクラスに変更<br>備考にクラスの内容を追加|渡邊|
2020/11/29|4|各クラスの詳細説明を追記|渡邊,茨木,上岡,久保|
2020/11/29|5|クラスの説明の記述方法の変更<br>クラス図の変更|渡邊|
2020/12/02|6|クラスの説明(users)の追記<br>クラス図の変更|渡邊|
2020/12/05|7|クラスの説明(主に学年関連)の変更<br>クラス図の変更|上岡|
2020/12/14|8|命名規則にしたがってクラス名,フィールド名の変更<br>クラス図の変更|渡邊|
2020/12/16|9|Classクラス → SchoolClassクラス に変更<br>クラス図の変更|渡邊|

## クラス図

![image](https://user-images.githubusercontent.com/63043511/102299728-cce2ec00-3f96-11eb-989e-e262d4e6f028.png)

## クラス図の説明

### User
- ユーザが持つ独自の情報と振る舞いを記録したクラス
- gradeはenum型で，小学5,6年生・中学1,2,3年生・高校1,2,3年生を表す。<br>

|フィールド名|内容|
|:-------|:--------------------|
|id|ユーザのID|
|name|ユーザの名前|
|password|ユーザがログインするためのパスワード|
|grade|ユーザの学年|
|sex|ユーザの性別|
|schoolClassId|ユーザが所属するクラスのID|

### Teacher
- 教師が持つ独自の情報と振る舞いを記録したクラス

|フィールド名|内容|
|:-------|:--------------------|
|id|教師のID|
|name|教師の名前|
|password|教員がログインするためのパスワード|

### SchoolClass
- ユーザ または 教員 の講義単位のまとまりを記録するクラス
- cookIdは,事前献立設定されてない場合 0 となる.

|フィールド名|説明|
|:---|:---|
|id|クラスのID|
|title|クラス名|
|key|ユーザがクラスに参加する際に用いる認証キー|
|teacherId|作成した教員のID|
|cookId|献立のID or 0|

### Cook
- ユーザ または 教員 の作成した1日分の献立を表すクラス
- userId または teacherId どちらかに当該 ユーザ または 教員 のidを持たせ,もう一方をnullにすることで,誰が作成した献立なのかを判断する.
- userGradeはenum型. userクラスのgradeとほぼ同じだが, 教員が作成した献立の場合にnullとなることを避けるため列挙子に教員を追加する(暫定)

|フィールド名|説明|
|:---|:---|
|id|献立のID|
|name|献立名|
|teacherId|作成した教員のID or NULL|
|userId|作成したユーザのID or NULL|
|createdAt|献立が作成された時間|
|userGrade|作成時のユーザの学年<br>*1を参照|

*1 こちらは第2回インスペクションの古川先輩の[学年を跨いだ場合,献立名重複により分かりづらくなる場合があるのではないか]と言うお話から,[献立の履歴を表示する際に,"当時参加していたクラス名"または"作成時の学年"を表示するのが良いのではないか]と言う話し合いから,当該フィールド名を持たせようと言う意見になりました.ここにおいて,現段階，学年を持たせるという方向性で進めております.しかし,先生方との相談で変更する可能性もあります。⇒ **"作成時の学年"で決定しました(2020/12/05)**

### CookMenu
- 作成された1日分の献立に含まれる各調理品が, 朝・昼・夕・間食のどれで選択された調理品なのかを紐づけるクラス
- is_○○の4つのフィールド名はbooleanで表され, デフォルト"0"とする. この4つのフィールド名のうち1つのみが"1"となることで判別される<br>
  　例1:カレーが昼食として選択されている場合, menuIdにカレーのidが入り, isLunchが1となる<br>
  　例2:カレーが昼食と夕食として選択されている場合, isLunchが1のCookMenuと, isDinnerが1のCookMenuで別々に作成される.

|フィールド名|内容|
|:-------|:--------------------|
|id|-|
|isBreakfast|朝食の調理品なら1|
|isLunch|昼食の調理品なら1|
|isDinner|夕食の調理品なら1|
|isSnack|間食の調理品なら1|
|cookId|1日分の献立(cooks)のid|
|menuId|調理品(menus)のid|

#### 提供されたクラス
|クラス名|　　　　　内容　　　　　|
|:-------|:--------------------|
|Menu|調理品を表す - 先輩方に作成していただきました|
|MenuIngredient|調理品に含まれる食材を表す - 先輩方に作成していただきました|
|MenuCategory|主食,副菜,…等を表す - 先輩方に作成していただきました|
|Ingredient|食材を表す - 先輩方に作成していただきました|
